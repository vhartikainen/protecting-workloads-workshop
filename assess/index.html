



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="This workshop shows how you can protect a web site using AWS Security Services">
      
      
        <link rel="canonical" href="https://protecting-workloads.awssecworkshops.com/assess/">
      
      
        <meta name="author" content="aws-security-workshops@amazon.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.1">
    
    
      
        <title>Assess Phase - Protecting Your WorkLoads With AWS WAF, Amazon Inspector, and AWS Systems Manger</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#protecting-your-workloads-assess-phase" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
  Copyright (c) 2016-2018 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

    <!-- Top-level navigation -->
    <nav class="md-header-nav md-grid">
      <div class="md-flex">
  
        <!-- Link to home -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://aws.amazon.com/"
              title="Amazon Web Services"
              class="md-header-nav__button md-logo">
            
              <img src="../assets/images/aws_smile_logo.png" width="40" height="24" />
            
          </a>
        </div>
  
        <!-- Button to toggle drawer -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <label class="md-icon md-icon--menu md-header-nav__button"
              for="__drawer"></label>
        </div>
  
        <!-- Header title -->
        <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title"
              data-md-component="title">
            
              
                <span class="md-header-nav__topic">
                  Protecting Your WorkLoads With AWS WAF, Amazon Inspector, and AWS Systems Manger
                </span>
                <span class="md-header-nav__topic">
                  Assess Phase
                </span>
              
            
          </div>
        </div>
        
        
        <!-- Button to open search dialogue -->
        <!--
        <div class="md-flex__cell md-flex__cell--shrink">
          
            
              <label class="md-icon md-icon--search md-header-nav__button"
                  for="__search"></label>
  
              
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
            
          
        </div>

         -->
         
         <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-flex__ellipsis md-header-nav__lang">
                <div>
                    <button onclick="window.location.href = 'https://awssecworkshops.com/';" class="md-lang-dropbtn fa fa-home"></button>
                </div>
            </div>
        </div>
  
        <!-- Repository containing source -->
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  

<a href="https://github.com/aws-samples/protecting-workloads-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/protecting-workloads-workshop
  </div>
</a>
            </div>
          </div>
        
      </div>
    </nav>
  </header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="Home" class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Main navigation -->
<nav class="md-nav md-nav--primary" data-md-level="0">

  <!-- Site title -->
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://protecting-workloads.awssecworkshops.com/"
        title="Protecting Your WorkLoads With AWS WAF, Amazon Inspector, and AWS Systems Manger" class="md-nav__button md-logo">
      
        <img src="../assets/images/aws_smile_logo.png" width="48" height="48" />
      
    </a>
    
  </label>

  <!-- Repository containing source -->
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/aws-samples/protecting-workloads-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/protecting-workloads-workshop
  </div>
</a>
    </div>
  

  <!-- Render item list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../build/" title="Build Phase" class="md-nav__link">
      Build Phase
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Assess Phase
      </label>
    
    <a href="./" title="Assess Phase" class="md-nav__link md-nav__link--active">
      Assess Phase
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examine-the-stack-that-you-built" title="Examine the stack that you built" class="md-nav__link">
    Examine the stack that you built
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#look-up-the-amazon-ec2-instances" title="Look up the Amazon EC2 instances" class="md-nav__link">
    Look up the Amazon EC2 instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-the-inspector-agent-on-the-amazon-ec2-instances" title="Install the Inspector Agent on the Amazon EC2 instances" class="md-nav__link">
    Install the Inspector Agent on the Amazon EC2 instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-amazon-inspector-to-scan-the-instances" title="Use Amazon Inspector to Scan the Instances" class="md-nav__link">
    Use Amazon Inspector to Scan the Instances
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-target" title="Configure the Amazon Inspector target" class="md-nav__link">
    Configure the Amazon Inspector target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-template" title="Configure the Amazon Inspector Template" class="md-nav__link">
    Configure the Amazon Inspector Template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-amazon-inspector-assessment" title="Run the Amazon Inspector Assessment" class="md-nav__link">
    Run the Amazon Inspector Assessment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../remediate/" title="Remediate Phase" class="md-nav__link">
      Remediate Phase
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../verify/" title="Verify Phase" class="md-nav__link">
      Verify Phase
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contribute/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examine-the-stack-that-you-built" title="Examine the stack that you built" class="md-nav__link">
    Examine the stack that you built
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#look-up-the-amazon-ec2-instances" title="Look up the Amazon EC2 instances" class="md-nav__link">
    Look up the Amazon EC2 instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-the-inspector-agent-on-the-amazon-ec2-instances" title="Install the Inspector Agent on the Amazon EC2 instances" class="md-nav__link">
    Install the Inspector Agent on the Amazon EC2 instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-amazon-inspector-to-scan-the-instances" title="Use Amazon Inspector to Scan the Instances" class="md-nav__link">
    Use Amazon Inspector to Scan the Instances
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-target" title="Configure the Amazon Inspector target" class="md-nav__link">
    Configure the Amazon Inspector target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-amazon-inspector-template" title="Configure the Amazon Inspector Template" class="md-nav__link">
    Configure the Amazon Inspector Template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-amazon-inspector-assessment" title="Run the Amazon Inspector Assessment" class="md-nav__link">
    Run the Amazon Inspector Assessment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/protecting-workloads-workshop/edit/master/docs/assess.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="protecting-your-workloads-assess-phase">Protecting Your Workloads - Assess Phase</h1>
<p>In the previous Build Phase, you built a CloudFormation stack that contains
some Amazon EC2 instances behind an application load balancer.
You are now going to use Amazon Inspector to assess the instances and identify
findings that need to be remediated.</p>
<p>Before you can assess the instances with Amazon Inspector, you need to identify
the instances and install the Amazon Inspector agent on them.
This is easier to do in small environments but the task can becone much more
complex in organizations with hundreds or even thousands of instances.
For this reason, you are going to learn how to use <em>tags</em> to select the instances.
Tags are labels that can be attached to AWS resources to make it easier to
act on them collectively.</p>
<p>In this section you will do the following tasks:</p>
<ol>
<li>Examine the stack you built</li>
<li>Look up the Amazon EC2 instances that were created as a result of the deployhment and understand the tags that are applied by AWS CloudFormation.</li>
<li>Use AWS Systems Manager to install the Amazon Inspector agent on the instances</li>
<li>Use Amazon Inspector to scan the instances</li>
</ol>
<h2 id="examine-the-stack-that-you-built">Examine the stack that you built</h2>
<ol>
<li>
<p>Go to the CloudFormation console in the same AWS region in which you created the stack in the Build Phase.  You should see a list of stacks similar to the figure below. Locate the stack you created.  In this documentation, the name of the stack is <em>pww</em>.  Copy this stack name into a scratch file on your workstation in case you need it later.</p>
<p><img alt="cloudformation-stack-list" src="../images/assess-cloudformation-stacks.png" /></p>
</li>
<li>
<p>Click the <strong>check box</strong> to the left of the stack name and then click the <strong>Resources</strong> tab below.  You will see a list of resources that were deployed by the stack as shown in the figure below.</p>
<p><img alt="cloudformation-stack-resources" src="../images/assess-cloudformation-resources.png" /></p>
<p>The <em>Type</em> column lists the type of the resouces.  Notice that you will not see any resources of type AWS::EC2::Instance.  The reason for this is that the CloudFormation stack did not deploy any.  The stack did, however, deploy an auto scaling group with a launch configuration that in turn launched the instances.  The auto scaling group was configured to propogate tags (attributes) to the instances it launches.  In a production environment, you may have a large number of resources that spin up and spin down because of the elastiicity that AWS offers.  You will now learn how to look up the Amazon EC2 instances using tags.</p>
</li>
</ol>
<h2 id="look-up-the-amazon-ec2-instances">Look up the Amazon EC2 instances</h2>
<ol>
<li>
<p>Go to the Amazon EC2 console and look for instances having a name that begins with the stack name followed by <em>-node</em>, <em>pww-node</em> in this example.  If you cannot see them, type the instance name (<em>pww-node</em>) into the search box.  Copy the two instance ids (they begin with <em>i-</em> and are followed by a series of digits) into your scratch file in case you need them.  Select one of them by checking the box to the left of the instance and then click on the <em>Tags</em> tab.  You should see a table like that in the figure below.</p>
<p><img alt="ec2-instance-list" src="../images/assess-ec2-instance-list.png" /></p>
</li>
<li>
<p>Notice that the instance has tags reflecting the CloudFormation stack name and stack id.  These tags are added because of settings in the auto scaling group which propogate tags to newly created instances.</p>
<p>You have now learned about the tags that you can use to look up AWS resources. You will take advantage of this feature when you set up Amazon Inspector later in this phase.</p>
</li>
</ol>
<h2 id="install-the-inspector-agent-on-the-amazon-ec2-instances">Install the Inspector Agent on the Amazon EC2 instances</h2>
<p>Now that you know how to identify the instances in the environment, you need to install the Amazon Inspector agent on them.  AWS Systems Manager provides a way for you to run commands across your Amazon EC2 instances.  The commands are defined in <em>documents</em>.  AWS provides a document that you will use to install the Amazon Inspector agent.  You will use tags to identify the instances on which to apply the document. </p>
<ol>
<li>
<p>Go to the AWS Systems Manager console.</p>
</li>
<li>
<p>Under the <em>Actions</em> menu on the left, click <strong>Run Command</strong>.  You will be taken to the AWS Systems Manager Run Command home screen.  Click the <strong>Run a Command</strong> button and the <em>Run a Command</em> screen will appear.</p>
</li>
<li>
<p>In the <em>Command document</em> window, page through the available documents until you find the document named <em>AmazonInspector-ManageAWSAgent</em>.  Click the radio button to the left of that document as shown in the figure below.</p>
<p><img alt="ssm-run-command" src="../images/assess-run-command-document.png" /></p>
</li>
<li>
<p>Scroll further down until you can see the <em>Targets</em> window.  Click the <strong>Specifying a tag</strong> radio button.  For the tag key, enter <em>aws:cloudformation:stack-name</em>.  For the value enter the name of the CloudFormation stack you created (<em>pww</em> in this example) and click <em>Add</em>.  Your screen should be similar to the figure below.</p>
<p><img alt="ssm-run-command-targets" src="../images/assess-run-command-targets.png" /></p>
</li>
<li>
<p>Scroll down to the <em>Output options</em> window.  Clear the box next to <em>Enable writing to an S3 bucket</em> as shown in the figure below.</p>
<p><img alt="ssm-run-command-output" src="../images/assess-run-command-output.png" /></p>
</li>
<li>
<p>Scroll to the bottom of the screen and click the <em>Run</em> button.  You will then be be taken to the command status window while the installation of the Amazon Inspector is running.  You can periodically update the command status by clicking on the refresh button within the window.   After the commands finish running, the <em>Overall status</em> should be <em>Success</em> as shown in the figure below.</p>
<p><img alt="ssm-run-command-results" src="../images/assess-run-command-results.png" /></p>
<p>You have now installed the Amazon Inspector agent on the instances in the environment.</p>
</li>
</ol>
<h2 id="use-amazon-inspector-to-scan-the-instances">Use Amazon Inspector to Scan the Instances</h2>
<h3 id="configure-the-amazon-inspector-target">Configure the Amazon Inspector target</h3>
<ol>
<li>
<p>Go to the Amazon Inspector console and click <strong>Get Started</strong> if prompted.  If you see a "Welcome to Amazon Inspector" wizard appear, click <strong>Cancel</strong>.  You will set up Amazon Inspector manually so you can become more familiar with the service.</p>
</li>
<li>
<p>Click <strong>Assessment Targets</strong> on the left menu and then click the <strong>Create</strong> button.</p>
</li>
<li>
<p>Scroll down to the Assessment Target window.  In the <em>Name</em> field, enter a name for the target.  For example, given that the stack name in this example is <em>pww</em>, you can enter <strong>pww targets</strong> or another name of your choosing.</p>
</li>
<li>
<p>In the <em>Use Tags</em> section, select <strong>aws:cloudformation:stack-name</strong> for the key from the drop down list and select the name of the stack (<em>pww</em> in this example) from the drop down value list.</p>
</li>
<li>
<p>Uncheck the <em>Install Agents</em> check box since we have already installed the agent. Your screen should look similar to the figure below.</p>
<p><img alt="inspector-targets" src="../images/assess-inspector-targets.png" /></p>
</li>
<li>
<p>Click the <strong>Save</strong> button to save the target definition.  Inspector may prompt you for permission to create a service linked role to give the Amazon Inspector service permission to retrieve information about your instances.  If you see a prompt like the one in the figure below, click <strong>Ok</strong> to create the role.</p>
<p><img alt="inspector-service-role" src="../images/assess-inspector-slr.png" /></p>
<p>You have now created an Amazon Inspector target that identifies the instances that would be assessed.  The target selects instances based on tag values.  In this case, the tag you are using is <em>aws:cloudformation:stack-name</em> which is set to the name of the CloudFormation stack.  In particular, the tag is added to the auto scaling launch configuration which is configured to propogate the tag to the Amazon EC2 instances that it launches.  Because of this, Amazon Inspector will automatically scan new instances that may appear over the lifetime of the environment.  This is an example of how the elasticity of the AWS cloud when combined with tagging can enable you to support dynamic environments.</p>
</li>
</ol>
<h3 id="configure-the-amazon-inspector-template">Configure the Amazon Inspector Template</h3>
<p>Now that you have created an Amazon Inspector target, you will now create an Amazon Inspector tepmlate.  You use templates to define the Amazon Inspector targets and rule packages that comprise an assessment run.</p>
<h3 id="run-the-amazon-inspector-assessment">Run the Amazon Inspector Assessment</h3>
<p>Click <a href="../remediate/">here</a> to proceed to the Remediate Phase.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../build/" title="Build Phase" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Build Phase
              </span>
            </div>
          </a>
        
        
          <a href="../remediate/" title="Remediate Phase" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Remediate Phase
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://awssecworkshops.com" class="md-footer-social__link fa fa-home"></a>
    
      <a href="https://aws.amazon.com/security/" class="md-footer-social__link fa fa-shield"></a>
    
      <a href="https://twitter.com/awssecurityinfo?lang=en" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://aws.amazon.com/blogs/security/" class="md-footer-social__link fa fa-rss"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b806dc00.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>